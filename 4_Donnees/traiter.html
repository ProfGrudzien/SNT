<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="../style.css"/>
    </head>
    <body>
        <div class="main">
            <h1>Traiter des donn√©es structur√©es</h1>
            <h2>Bases de donn√©es</h2>
            <p>
                Une base de donn√©es est la collection de donn√©es d√©crivant des entit√©s de m√™me nature.
                Les donn√©es sont souvent repr√©sent√©es en tableau. Chaque ligne correspond √† une des entit√©s, on parle d‚Äô<mark>enregistrement</mark>.
                Le nom d‚Äôune colonne est un <mark>descripteur</mark>.
                Pour visualiser et manipuler ces donn√©es, on peut adopter diff√©rentes approches :
                <ul>
                    <li>utiliser un format simple (texte brut) et un langage de programmation ;</li>
                    <li>utiliser un tableur ;</li>
                    <li>utiliser un logiciel de base de donn√©es relationnelles.</li>
                </ul>
            </p>
            <h2>Base de donn√©es en texte brut</h2>
            <p>
                Un moyen simple d‚Äôenregistrer les donn√©es est d‚Äôutiliser un format texte brut.
                Enregistrer les donn√©es en texte plut√¥t que directement en binaire permet de faciliter leur consultation, les √©changes et le traitement par des logiciels.
                Les principaux formats de bases de donn√©es en texte brut sont :
            </p>
            <h3>Les fichiers CSV</h3>
            <p>
                Dans le format de fichier CSV (comma-separated values), chaque enregistrement est d√©crit par une ligne o√π les valeurs sont s√©par√©s par un symbole bien d√©fini.
                Souvent ce symbole est la virgule (comma en anglais), mais parfois le point-virgule ou la tabulation.
                La premi√®re ligne contient g√©n√©ralement le nom des descripteurs.
            </p>
            <div class="encadre">
                nom;pr√©nom;poste<br/>
                Lloris;Hugo;gardien<br/>
                Hernandez;Lucas;d√©fenseur<br/>
                Kimpembe;Presnel;d√©fenseur
            </div>
            <p>
                Le principal objectif est d‚Äô√©conomiser l‚Äôespace n√©cessaire pour enregistrer les donn√©es.
                La cons√©quence est le manque de lisibilit√© d‚Äôun enregistrement si le nombre de descripteurs est important.
            </p>
            <h3>Les fichiers XML</h3>
            <p>
                Le format XML permet de d√©tailler les valeurs prises par un enregistrement en les d√©coupant selon plusieurs descripteur.
                Il permet alors de d√©crire une hi√©rarchie dans des entit√©s de nature diff√©rente.
                La syntaxe s‚Äôapparente √† celle du langage HTML.
            </p>
            <div class="encadre">
                &lt;equipe&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&lt;pays&gt;France&lt;/pays&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&lt;joueur&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;nom&gt;Lloris&lt;/nom&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;prenom&gt;Hugo&lt;/prenom&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;poste&gt;gardien&lt;/poste&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&lt;/joueur&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&lt;joueur&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;nom&gt;Hernandez&lt;/nom&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;prenom&gt;Lucas&lt;/prenom&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;poste&gt;d√©fenseur&lt;/poste&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&lt;/joueur&gt;<br/>
                &lt;/equipe&gt;
            </div>
            <h3>Le format JSON</h3>
            <p>
                Le format JSON (JavaScript Object Notation) utilise la syntaxe du langage de programmation JavaScript tr√®s utilis√© sur le Web.
                Il permet alors une int√©gration tr√®s facile avec ce langage de programmation mais est aussi tr√®s facilement exploitable par les autres langages de programmation.
            </p>
            <div class="encadre">
                [<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;{ "nom":"Lloris", "pr√©nom":"Hugo", "poste":"gardien" },<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;{ "nom":"Hernandez", "pr√©nom":"Lucas", "poste":"d√©fenseur" },<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;{ "nom":"Kimpembe", "pr√©nom":"Presnel", "poste":"d√©fenseur" }<br/>
                ]
            </div>
            <h2>Exploitation avec un tableur</h2>
            <p>
                Comme les donn√©es structur√©es peuvent √™tre d√©crites par des tableaux, le tableur est un logiciel tr√®s indiqu√© pour consulter et traiter ces donn√©es.
                Ce type de logiciel g√®re d‚Äôailleurs tr√®s bien le format CSV et propose de choisir les param√®tres afin de reconstituer le tableau repr√©sentant ces donn√©es.
            </p>
            <div class="exercice">
                <ol>
                    <li>T√©l√©charger le fichier <a href="ival-2020-donn-es--87809.csv">ival-2020-donn-es--87809.csv</a></li>
                    <li>
                        Ouvrir ce fichier avec un <b>√©diteur de texte</b>.
                        <ol class="sous-num">
                            <li>Combien d‚Äôenregistrements contient cette base de donn√©es ?</li>
                            <li>A quoi correspondent les trois premi√®res valeurs de chaque enregistrement ?</li>
                            <li>Comment retrouver la ligne correspondant √† notre lyc√©e ?</li>
                        </ol>
                    </li>
                    <li>
                        Ouvrir ce fichier avec un <b>tableur</b>.
                        <ol class="sous-num">
                            <li>Dans quelle colonne peut-on trouver le pourcentage de r√©ussite toutes fili√®res confondues ?</li>
                            <li>S√©lectionner les donn√©es puis l‚Äôoutil auto-filtres. Avec cet outil, retrouver notre lyc√©e.</li>
                            <li>R√©-afficher tous les √©tablissements puis avec l'auto-filtre, ranger les lyc√©es par ordre d√©croissant de nombre d‚Äô√©l√®ves pr√©sents √† l‚Äô√©preuve du bac (toutes fili√®res confondues).</li>
                            <li>S√©lectionner les donn√©es, puis avec l'outil trier, ranger les √©tablissements par taux de r√©ussite (toutes fili√®res confondues) puis par nombre de pr√©sents (toutes fili√®res confondues)</li>
                        </ol>
                    </li>
                </ol>
            </div>
            <div class="exercice">
                <ol>
                    <li>T√©l√©charger le fichier <a href="etablissements.csv">etablissements.csv</a></li>
                    <li>Ouvrir ce fichier avec un <b>tableur</b>.</li>
                    <li>
                        Cacher les colonnes qui ne nous serviront pas, c‚Äôest-√†-dire toutes sauf :
                        <ul>
                            <li>Appellation officielle</li>
                            <li>Secteur Public / Priv√©</li>
                            <li>Commune</li>
                            <li>Latitude</li>
                            <li>Longitude</li>
                            <li>Nature</li>
                            <li>D√©partement</li>
                        </ul>
                    </li>
                    <li>Quel est l‚Äô√©tablissement le plus √† l‚Äôouest ?</li>
                    <li>Quel est le coll√®ge le plus au sud ?</li>
                    <li>Combien y a t‚Äôil de lyc√©es publics dans le Vaucluse ?</li>
                    <li>Quelle est l‚Äô√©cole publique la plus au nord de Cavaillon ?</li>
                </ol>
            </div>
            <h2>Exploitation avec Python</h2>
            <h3>Les listes</h3>
            <p>
                La liste est un nouveau type de variable qui permet de stocker plusieurs √©l√©ments.
                En python, les √©l√©ments d‚Äôune m√™me liste ne sont pas n√©cessairement du m√™me type.
                Une liste est reconnaissable par l‚Äôutilisation de crochet pour ouvrir et fermer la liste
                et par l‚Äôutilisation de virgules pour s√©parer les donn√©es. Exemples :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    L = [] <span class="commentaire"># une liste vide</span><br/>
                    I = [17] <span class="commentaire"># une liste d‚Äôune seule valeur</span><br/>
                    S = [3, 5, 7]<br/>
                    T = [1, "pomme", 2.3]<br/>
                    E = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]<br/>
                </p>
            </div>
            <p>
                On peut afficher le nombre d‚Äô√©l√©ments d‚Äôune liste <mark class='code'>L</mark> gr√¢ce √† la fonction <mark class='code'>len(L)</mark>.
                On acc√®de aux √©l√©ments d‚Äôune liste gr√¢ce √† leur position que l‚Äôon appelle aussi <mark>indice</mark>.
                Attention, en Python, cette num√©rotation commence √† 0 !
            </p>
            <div class="exercice">
                On consid√®re la liste <mark class="code">L = [3, 4, 13, 14, 25, 26, 37, 38, 49, 50]</mark>.<br/>
                Compl√©ter les phrases suivantes :
                <ol>
                    <li>L[5] donne la ... valeur, c‚Äôest-√†-dire la valeur ... .</li>
                    <li>L[...] donne la 3<sup>√®me</sup> valeur, c‚Äôest-√†-dire la valeur 13.</li>
                    <li>L[...] donne la 1<sup>√®re</sup> valeur, c‚Äôest-√†-dire la valeur 3.</li>
                </ol>
            </div>
            <p>
                On peut parcourir les √©l√©ments d‚Äôune liste √† l‚Äôaide d‚Äôune boucle <mark class="code">for</mark>. Exemple :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    L = ["Anna", "Lee-Lou", "Emma"]<br/>
                    for prenom in L :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;print("Bonjour", prenom, "!")
                </p>
            </div>
            <div class="exercice">
                <ol>
                    <li>Cr√©er la liste <mark class="code">M</mark> contenant tous les mois de l‚Äôann√©e. N‚Äôoubliez pas les guillemets !</li>
                    <li>A l‚Äôaide d‚Äôune boucle, afficher tous ces mois.</li>
                    <li>Compl√©ter l‚Äôaffichage pour ajouter le num√©ro du mois (1 pour janvier, 2 pour f√©vrier, ...) devant le nom du mois.<br/>
                        Indice : on pourra utiliser une autre variable n</li>
                    <li>Afficher uniquement les mois dont le nom contient la lettre ¬´ v ¬ª.<br/>
                        Indice : on pourra utiliser un test if</li>
                </ol>
            </div>
            <h3>Fichier CSV et Python</h3>
            <p>
                Python propose une biblioth√®que permettant de facilement utiliser les donn√©es enregistr√©es dans des fichiers CSV.
                Il suffit d‚Äô√©crire les lignes de code suivante pour extraire les donn√©es du fichier ival-2020-donn-es--87809.csv
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    import csv<br/>
                    with open("ival-2020-donn-es--87809.csv") as fichier :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;lignes = list(csv.reader(fichier, delimiter=";"))
                </p>
            </div>
            <p>
                Remarque : le param√®tre <mark class="code">delimiter=";"</mark> permet de choisir le caract√®re s√©parant les valeurs dans le fichier CSV.
            </p>
            <p>
                La premi√®re ligne de ce fichier CSV contient le nom des descripteurs.
                En python, on utilisera l‚Äôindice des valeurs pour y acc√©der.
                On commence donc par afficher tous les noms des descripteurs accompagn√©s de leurs indices :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    i = 0<br/>
                    for nom in lignes[0] :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;print(i, ":", nom)<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;i = i + 1
                </p>
            </div>
            <p>
                On peut maintenant filtrer les donn√©es pour n‚Äôafficher par exemple que le nom et la ville
                des lyc√©es avec 100% de r√©ussite au bac :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    for ligne in lignes :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;if ligne[28] == "100" :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(ligne[2], "√†", ligne[3])
                </p>
            </div>
            <p>
                On peut aussi enregistrer le r√©sultat du filtrage dans une nouvelle liste. Exemple :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    R = [[L[2], L[3], L[28]] for L in lignes if L[1] == "VAUCLUSE"]
                </p>
            </div>
            <p>
                Les donn√©es d‚Äôune ligne peuvent alors √™tre tri√©es. Il faut alors utiliser une fonction pour
                indiquer au programme la valeur qui permet de faire le tri. Ici, les lyc√©es du Vaucluse de
                la liste <mark class="code">R</mark> vont √™tre tri√©s par r√©ussite au bac puis affich√©s.
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    def ordre(lycee) :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;return -int(lycee[2])<br/>
                    <span class="commentaire"># int convertit en nombre entier, le - permet le tri d√©croissant</span><br/>
                    R.sort(key=ordre)<br/>
                    for lycee in R :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;print(lycee[0], "√†", lycee[1], ":", lycee[2])
                </p>
            </div>
        </div>
        <script type="text/javascript" src="../script.js"></script>
    </body>
</html>
