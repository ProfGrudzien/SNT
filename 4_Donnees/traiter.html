<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="../style.css"/>
        <link rel="stylesheet" href="exerciceListe.css"/>
    </head>
    <body>
        <div class="main">
            <h1>Traiter des donn√©es structur√©es</h1>
            <h2>Bases de donn√©es</h2>
            <p>
                Une base de donn√©es est la collection de donn√©es d√©crivant des entit√©s de m√™me nature.
                Les donn√©es sont souvent repr√©sent√©es en tableau.
                Chaque ligne correspond √† une des entit√©s, on parle d‚Äô<mark>enregistrement</mark>.
                Le nom d‚Äôune colonne est un <mark>descripteur</mark>.
                Pour visualiser et manipuler ces donn√©es, on peut adopter diff√©rentes approches :
                <ul>
                    <li>utiliser un format simple (texte brut) et un langage de programmation ;</li>
                    <li>utiliser un tableur ;</li>
                    <li>utiliser un logiciel de base de donn√©es relationnelles.</li>
                </ul>
            </p>
            <h2>Base de donn√©es en texte brut</h2>
            <p>
                Un moyen simple d‚Äôenregistrer les donn√©es est d‚Äôutiliser un format texte brut.
                Enregistrer les donn√©es en texte plut√¥t que directement en binaire permet de faciliter leur consultation,
                les √©changes et le traitement par des logiciels.
                Les principaux formats de bases de donn√©es en texte brut sont :
            </p>
            <h3>Les fichiers CSV</h3>
            <p>
                Dans le format de fichier CSV (comma-separated values), chaque enregistrement est d√©crit par une ligne
                o√π les valeurs sont s√©par√©s par un symbole bien d√©fini.
                Souvent ce symbole est la virgule (comma en anglais), mais parfois le point-virgule ou la tabulation.
                La premi√®re ligne contient g√©n√©ralement le nom des descripteurs.
            </p>
            <div class="encadre">
                nom;pr√©nom;poste<br/>
                Lloris;Hugo;gardien<br/>
                Hernandez;Lucas;d√©fenseur<br/>
                Kimpembe;Presnel;d√©fenseur
            </div>
            <p>
                Le principal objectif est d‚Äô√©conomiser l‚Äôespace n√©cessaire pour enregistrer les donn√©es.
                La cons√©quence est le manque de lisibilit√© d‚Äôun enregistrement si le nombre de descripteurs est important.
            </p>
            <h3>Les fichiers XML</h3>
            <p>
                Le format XML permet de d√©tailler les valeurs prises par un enregistrement en les d√©coupant selon plusieurs descripteurs.
                Il permet alors de d√©crire une hi√©rarchie dans des entit√©s de natures diff√©rentes.
                La syntaxe s‚Äôapparente √† celle du langage HTML.
            </p>
            <div class="encadre">
                &lt;equipe&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&lt;pays&gt;France&lt;/pays&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&lt;joueur&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;nom&gt;Lloris&lt;/nom&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;prenom&gt;Hugo&lt;/prenom&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;poste&gt;gardien&lt;/poste&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&lt;/joueur&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&lt;joueur&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;nom&gt;Hernandez&lt;/nom&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;prenom&gt;Lucas&lt;/prenom&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;poste&gt;d√©fenseur&lt;/poste&gt;<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&lt;/joueur&gt;<br/>
                &lt;/equipe&gt;
            </div>
            <h3>Le format JSON</h3>
            <p>
                Le format JSON (JavaScript Object Notation) utilise la syntaxe du langage de programmation JavaScript
                tr√®s utilis√© sur le Web.
                Il permet alors une int√©gration tr√®s facile avec ce langage de programmation mais est aussi tr√®s facilement exploitable
                par les autres langages de programmation.
            </p>
            <div class="encadre">
                [<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;{ "nom":"Lloris", "pr√©nom":"Hugo", "poste":"gardien" },<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;{ "nom":"Hernandez", "pr√©nom":"Lucas", "poste":"d√©fenseur" },<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;{ "nom":"Kimpembe", "pr√©nom":"Presnel", "poste":"d√©fenseur" }<br/>
                ]
            </div>
            <h2>Exploitation avec un tableur</h2>
            <p>
                Comme les donn√©es structur√©es peuvent √™tre d√©crites par des tableaux,
                le tableur est un logiciel tr√®s indiqu√© pour consulter et traiter ces donn√©es.
                Ce type de logiciel g√®re d‚Äôailleurs tr√®s bien le format CSV et propose de choisir les param√®tres
                afin de reconstituer le tableau repr√©sentant ces donn√©es.
            </p>
            <div class="exercice">
                <ol>
                    <li>T√©l√©charger le fichier <a href="ival-2020-donn-es--87809.csv">ival-2020-donn-es--87809.csv</a></li>
                    <li>
                        Ouvrir ce fichier avec un <b>√©diteur de texte</b>.
                        <ol class="sous-num">
                            <li>Combien d‚Äôenregistrements contient cette base de donn√©es ?</li>
                            <li>A quoi correspondent les trois premi√®res valeurs de chaque enregistrement ?</li>
                            <li>Comment retrouver la ligne correspondant √† notre lyc√©e ?</li>
                        </ol>
                    </li>
                    <li>
                        Ouvrir ce fichier avec un <b>tableur</b>.
                        <ol class="sous-num">
                            <li>Dans quelle colonne peut-on trouver le pourcentage de r√©ussite toutes fili√®res confondues ?</li>
                            <li>S√©lectionner les donn√©es puis l‚Äôoutil auto-filtres. Avec cet outil, retrouver notre lyc√©e.</li>
                            <li>
                                R√©-afficher tous les √©tablissements puis avec l'auto-filtre,
                                ranger les lyc√©es par ordre d√©croissant de nombre d‚Äô√©l√®ves pr√©sents √† l‚Äô√©preuve du bac
                                (toutes fili√®res confondues).
                            </li>
                            <li>
                                S√©lectionner les donn√©es, puis avec l'outil trier,
                                ranger les √©tablissements par taux de r√©ussite (toutes fili√®res confondues)
                                puis par nombre de pr√©sents (toutes fili√®res confondues)
                            </li>
                        </ol>
                    </li>
                </ol>
            </div>
            <div class="exercice">
                <ol>
                    <li>T√©l√©charger le fichier <a href="etablissements.csv">etablissements.csv</a></li>
                    <li>Ouvrir ce fichier avec un <b>tableur</b>.</li>
                    <li>
                        Cacher les colonnes qui ne nous serviront pas, c‚Äôest-√†-dire toutes sauf :
                        <ul>
                            <li>Appellation officielle</li>
                            <li>Secteur Public / Priv√©</li>
                            <li>Commune</li>
                            <li>Latitude</li>
                            <li>Longitude</li>
                            <li>Nature</li>
                            <li>D√©partement</li>
                        </ul>
                    </li>
                    <li>Quel est l‚Äô√©tablissement le plus √† l‚Äôouest ?</li>
                    <li>Quel est le coll√®ge le plus au sud ?</li>
                    <li>Combien y a t‚Äôil de lyc√©es publics dans le Vaucluse ?</li>
                    <li>Quelle est l‚Äô√©cole publique la plus au nord de Cavaillon ?</li>
                </ol>
            </div>
            <h2>Exploitation avec Python</h2>
            <h3>Les listes</h3>
            <p>
                La liste est un nouveau type de variable qui permet de stocker plusieurs √©l√©ments.
                En python, les √©l√©ments d‚Äôune m√™me liste ne sont pas n√©cessairement du m√™me type.
                Une liste est reconnaissable par l‚Äôutilisation de crochet pour ouvrir et fermer la liste
                et par l‚Äôutilisation de virgules pour s√©parer les donn√©es. Exemples :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    L = [] <span class="commentaire"># une liste vide</span><br/>
                    I = [17] <span class="commentaire"># une liste d‚Äôune seule valeur</span><br/>
                    S = [3, 5, 7]<br/>
                    T = [1, "pomme", 2.3]<br/>
                    E = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]<br/>
                </p>
            </div>
            <p>
                On peut afficher le nombre d‚Äô√©l√©ments d‚Äôune liste <mark class='code'>L</mark> gr√¢ce √† la fonction <mark class='code'>len(L)</mark>.
                On acc√®de aux √©l√©ments d‚Äôune liste gr√¢ce √† leur position que l‚Äôon appelle aussi <mark>indice</mark>.
                Attention, en Python, cette num√©rotation commence √† 0 !
            </p>
            <div class="exercice" id="exerciceListe" class="exerciseur">
                <div class="exerciseur"></div>
                <p class="centrer"></p>
                <p class="adroite">
                    <input type="button" value="verifier" id="verifier">
                    <input type="button" value="refaire" id="refaire">
                </p>
            </div>
            <p>
                On peut parcourir les √©l√©ments d‚Äôune liste √† l‚Äôaide d‚Äôune boucle <mark class="code">for</mark>. Exemple :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    L = ["Anna", "Lee-Lou", "Emma"]<br/>
                    for prenom in L :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;print("Bonjour", prenom, "!")
                </p>
            </div>
            <div class="exercice">
                <ol>
                    <li>Cr√©er la liste <mark class="code">M</mark> contenant tous les mois de l‚Äôann√©e. N‚Äôoubliez pas les guillemets !</li>
                    <li>A l‚Äôaide d‚Äôune boucle, afficher tous ces mois.</li>
                    <li>Compl√©ter l‚Äôaffichage pour ajouter le num√©ro du mois (1 pour janvier, 2 pour f√©vrier, ...) devant le nom du mois.<br/>
                        Indice : on pourra utiliser une autre variable n</li>
                    <li>Afficher uniquement les mois dont le nom contient la lettre ¬´ v ¬ª.<br/>
                        Indice : on pourra utiliser un test if</li>
                </ol>
            </div>
            <h3>Fichier CSV et Python</h3>
            <p>
                Python propose une biblioth√®que permettant de facilement utiliser les donn√©es enregistr√©es dans des fichiers CSV.
                Il suffit d‚Äô√©crire les lignes de code suivante pour extraire les donn√©es du fichier ival-2020-donn-es--87809.csv
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    import csv<br/>
                    with open("ival-2020-donn-es--87809.csv") as fichier :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;lignes = list(csv.reader(fichier, delimiter=";"))
                </p>
            </div>
            <p>
                Remarque : le param√®tre <mark class="code">delimiter=";"</mark> permet de choisir le caract√®re s√©parant les valeurs dans le fichier CSV.
            </p>
            <p>
                La premi√®re ligne de ce fichier CSV contient le nom des descripteurs.
                En python, on utilisera l‚Äôindice des valeurs pour y acc√©der.
                On commence donc par afficher tous les noms des descripteurs accompagn√©s de leurs indices :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    i = 0<br/>
                    for nom in lignes[0] :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;print(i, ":", nom)<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;i = i + 1
                </p>
            </div>
            <p>
                On peut maintenant filtrer les donn√©es pour n‚Äôafficher par exemple que le nom et la ville
                des lyc√©es avec 100% de r√©ussite au bac :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    for ligne in lignes :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;if ligne[28] == "100" :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(ligne[2], "√†", ligne[3])
                </p>
            </div>
            <p>
                On peut aussi enregistrer le r√©sultat du filtrage dans une nouvelle liste. Exemple :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    R = [[L[2], L[3], L[28]] for L in lignes if L[1] == "VAUCLUSE"]
                </p>
            </div>
            <p>
                Les donn√©es d‚Äôune ligne peuvent alors √™tre tri√©es. Il faut alors utiliser une fonction pour
                indiquer au programme la valeur qui permet de faire le tri. Ici, les lyc√©es du Vaucluse de
                la liste <mark class="code">R</mark> vont √™tre tri√©s par r√©ussite au bac puis affich√©s.
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    def ordre(lycee) :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;return -int(lycee[2])<br/>
                    <span class="commentaire"># int convertit en nombre entier, le - permet le tri d√©croissant</span><br/>
                    R.sort(key=ordre)<br/>
                    for lycee in R :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;print(lycee[0], "√†", lycee[1], ":", lycee[2])
                </p>
            </div>
            <h2>Le langage SQL</h2>
            <p>
                Le fichier CSV permet de facilement enregistrer des bases de donn√©es.
                Cependant, ce n‚Äôest pas un format optimis√© et il montre des limites pour enregistrer des bases de donn√©es volumineuses.
                En effet, stocker des valeurs (les nombres notamment) directement en binaire √©conomise beaucoup plus de place
                que de les traduire en texte avant de stocker ce texte en binaire.
            </p>
            <p>
                Le langage de programmation Python est polyvalent.
                Il permet donc de g√©rer les bases de donn√©es.
                Mais il faut bien conna√Ætre ce langage pour traiter les donn√©es comme on le souhaite.
                Il existe des langages de programmation sp√©cialis√©s pour manipuler des bases de donn√©es.
            </p>
            <p>
                Le langage SQL par exemple permet de traiter facilement les donn√©es gr√¢ce √† une syntaxe tr√®s facile √† utiliser.
                De plus, ce langage permet de manipuler des bases de donn√©es relationnelles,
                c‚Äôest-√†-dire proposant des liens entre des donn√©es stock√©es dans des tables diff√©rentes.
            </p>
            <p>
                L‚Äôinstallation d‚Äôun serveur pour manipuler des bases de donn√©es relationnelles n‚Äôest pas simple.
                Pour d√©couvrir ce langage, nous utiliserons un simple simulateur disponible √† l‚Äôadresse :
                <a href="https://profgrudzien.github.io/practice_sql_in_browser/">https://profgrudzien.github.io/practice_sql_in_browser/</a>
            </p>
            <div class="exercice">
                <ol>
                    <li>
                        La commande <mark class="code">SHOW DATABASES;</mark> permet de listes les bases de donn√©es disponibles.
                        Quel est le nom de la base de donn√©es disponible&nbsp;?
                    </li>
                    <li>
                        La commande <mark class="code">USE emmy18;</mark> permet de s√©lectionner cette base de donn√©es.
                        La commande <mark class="code">SHOW TABLES;</mark> permet de listes les tables de la base de donn√©es s√©lectionn√©e.
                        Quels sont les noms des tables de cette base de donn√©es&nbsp;?
                    </li>
                    <li>
                        La commande <mark class="code">DESCRIBE series;</mark> affiche les descripteurs de la table <mark class="code">series</mark>.
                        Quels sont ces descripteurs&nbsp;?
                    </li>
                    <li>Quels sont les descripteurs de la table <mark class="code">acteurs</mark>&nbsp;?</li>
                    <li>Quels sont les descripteurs de la table <mark class="code">tourne</mark>&nbsp;?</li>
                    <li>
                        On peut s√©lectionner les donn√©es gr√¢ce √† l‚Äôinstruction <mark class="code">SELECT</mark>.
                        Exemple : <mark class="code">SELECT prenom, nom FROM acteurs WHERE pays="Espagne";</mark>
                        donne le pr√©nom et le nom des acteurs espagnoles.
                        Combien de r√©sultat s‚Äôaffichent&nbsp;?
                    </li>
                    <li>
                        Pour s√©lectionner toutes les colonnes, on peut utiliser le caract√®re <mark class="code">*</mark>.
                        Exemple : <mark class="code">SELECT * FROM acteurs;</mark> s√©lectionne toutes les colonnes pour tous les acteurs.
                        Combien d‚Äôacteurs et actrices sont pr√©sents dans cette base de donn√©es&nbsp;?
                    </li>
                    <li>Quelle instruction permet d‚Äôafficher le nom des actrices de cette base de donn√©es&nbsp;?</li>
                    <li>Quelle instruction permet d‚Äôafficher le nom des s√©ries diffus√©es par Netflix&nbsp;?</li>
                    <li>
                        On peut aussi croiser les tables facilement.
                        Si un descripteur est pr√©sent dans plusieurs tables, 
                        on peut pr√©ciser le nom de la table en utilisant le symbole <mark class="code">.</mark>.
                        Exemple : <br/><mark class="code">SELECT role FROM acteurs, tourne WHERE id_acteur=acteurs.id and nom="Foy";</mark>
                        affiche les r√¥les interpr√©t√©s par l‚Äôactrice Claire Foy. Quelle r√¥le interpr√®te-t-elle&nbsp;?
                    </li>
                    <li>Quelle instruction permet d‚Äôafficher tous les r√¥les interpr√©t√©s par Tatiana Maslany&nbsp;?</li>
                    <li>Quelle instruction permet d‚Äôafficher toutes les s√©ries o√π Tatiana Maslany a un r√¥le&nbsp;?</li>
                    <li>Quelle instruction permet d‚Äôafficher le pr√©nom et le nom des acteurs jouant dans la s√©rie The Americans&nbsp;?</li>
                    <li>
                        On peut trier les donn√©es en ajoutant <mark class="code">ORDER BY</mark> √† la fin de la commande <mark class="code">SELECT</mark>.
                        Exemple : <br/><mark class="code">SELECT prenom, nom, date_de_naissance FROM acteurs ORDER BY date_de_naissance;</mark>
                        trie les acteurs du plus √¢g√© au plus jeune. Qui est l‚Äôacteur le plus jeune&nbsp;?
                    </li>
                </ol>
            </div>
        </div>
        <script type="text/javascript" src="../script.js"></script>
        <script type="text/javascript" src="exerciceListe.js"></script>
    </body>
</html>
